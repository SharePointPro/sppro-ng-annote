{"version":3,"file":"sppro-ng-annote.js","sources":["../../../projects/sppro-ng-annote/src/lib/enums/drawableEnum.ts","../../../projects/sppro-ng-annote/src/lib/factories/shapeFactory.ts","../../../projects/sppro-ng-annote/src/lib/factories/textareaFactory.ts","../../../projects/sppro-ng-annote/src/lib/ng-annote/ng-annote.component.ts","../../../projects/sppro-ng-annote/src/lib/toolbar/toolbar.component.ts","../../../projects/sppro-ng-annote/src/lib/sppro-ng-annote.module.ts","../../../projects/sppro-ng-annote/src/public-api.ts","../../../projects/sppro-ng-annote/src/sppro-ng-annote.ts"],"sourcesContent":["export enum DrawableEnum {\r\n    FreePathDrawable,\r\n    SquareDrawable,\r\n    CircleDrawable,\r\n    ArrowDrawable,\r\n    TextDrawable\r\n  }","import { normalizeGenFileSuffix } from '@angular/compiler/src/aot/util';\r\nimport Konva from 'konva';\r\n\r\nconst TEXT_AREA_ID = \"konva-text-editor\";\r\n\r\nexport default {\r\n    CreateLine(x: number, y: number, color: string): Konva.Line {\r\n        return new Konva.Line({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            // globalCompositeOperation:\r\n            //   this.mode === 'brush' ? 'source-over' : 'destination-out',\r\n            points: [x, y],\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateRectange(x: number, y: number, color: string): Konva.Rect {\r\n        return new Konva.Rect({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            x: x,\r\n            y: y,\r\n            width: 0,\r\n            height: 0,\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateCircle(x: number, y: number, color: string): Konva.Circle {\r\n        return new Konva.Circle({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            x: x,\r\n            y: y,\r\n            radius: 0,\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateArrow(x: number, y: number, color: string): Konva.Arrow {\r\n        return new Konva.Arrow({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            points: [x, y],\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateText(x: number, y: number, color: string, fontFamily: string, text: string): Konva.Text {\r\n        return new Konva.Text({\r\n            stroke: color,\r\n            strokeWidth: .1,\r\n            x: x,\r\n            y: y + 1,\r\n            text: text,\r\n            draggable: true,\r\n            fontFamily: fontFamily,\r\n            fontStyle: 'normal'\r\n        });\r\n    }\r\n\r\n}\r\n","const TEXT_AREA_ID = \"konva-text-editor\";\r\n\r\nexport default {\r\n    createTextArea: (x: number, y: number, color: string, fontFamily: string, onBlur: Function) => {\r\n        let textarea = getTextArea();\r\n        styleTextarea(textarea, x, y, color, fontFamily);\r\n        setupEvents(textarea, onBlur);\r\n\r\n        //Auto focus after creation\r\n        setTimeout(() => {\r\n            textarea.focus();\r\n        }, (100));\r\n    }\r\n}\r\n\r\nconst getTextArea = () => {\r\n    var textarea = document.getElementById(TEXT_AREA_ID);\r\n    if (!textarea) {\r\n        textarea = document.createElement('textarea');\r\n        let canvas = document.getElementsByClassName(\"konvajs-content\")[0];\r\n        canvas.appendChild(textarea);\r\n\r\n        textarea.style.position = 'absolute';\r\n        textarea.id = TEXT_AREA_ID;\r\n    }\r\n    return textarea;\r\n}\r\n\r\nconst styleTextarea = (textarea, x, y, color, fontFamily) => {\r\n    textarea.style.top = y + 'px';\r\n    textarea.style.left = x + 'px';\r\n    textarea.style.width = \"20px\";\r\n    textarea.style.height = \"20px\"\r\n    textarea.style.fontSize = '12px';\r\n    textarea.style.border = 'none';\r\n    textarea.style.padding = '0px';\r\n    textarea.style.margin = '0px';\r\n    textarea.style.overflow = 'hidden';\r\n    textarea.style.whiteSpace = 'nowrap';\r\n    textarea.style.background = 'none';\r\n    textarea.style.outline = 'none';\r\n    textarea.style.resize = 'none';\r\n    textarea.style.lineHeight = \"12px\"\r\n    textarea.style.transformOrigin = 'left top';\r\n    textarea.style.color = color;\r\n    textarea.style.fontFamily = fontFamily;\r\n}\r\n\r\nconst setupEvents = (textarea, onBlur) => {\r\n \r\n    textarea.addEventListener('input', (e) => {\r\n        autoExpand(e.target);\r\n    });\r\n\r\n    textarea.addEventListener('blur', (e) => {\r\n        removeTextarea();\r\n        onBlur(e);\r\n    });\r\n}\r\n\r\nconst removeTextarea = () => {\r\n    var elem = document.getElementById(TEXT_AREA_ID);\r\n    if (elem != null) {\r\n        elem.parentNode.removeChild(elem);\r\n    }\r\n}\r\n\r\nconst autoExpand = (field) => {\r\n    // Calculate the height\r\n    var height = field.scrollHeight;\r\n    var width = field.scrollWidth;\r\n    field.style.width = width + 'px';\r\n    field.style.height = height + 'px';\r\n}","import { createOfflineCompileUrlResolver } from '@angular/compiler';\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport Konva from 'konva';\nimport { DrawableEnum } from  '../enums/drawableEnum';\nimport shapeFactory from '../factories/shapeFactory';\nimport textareaFactory from '../factories/textareaFactory';\n\nconst DEFAULT_DRAWABLE_TYPE: DrawableEnum = DrawableEnum.FreePathDrawable;\nconst DEFAULT_FONT_FAMILY: string = 'Arial';\n\n@Component({\n  selector: 'sppro-ng-annote',\n  templateUrl: './ng-annote.component.html',\n  styleUrls: ['./ng-annote.component.scss']\n})\nexport class NgAnnoteComponent implements OnInit {\n\n  @Output() onSave = new EventEmitter<string>();\n\n  private _drawableType: DrawableEnum = DEFAULT_DRAWABLE_TYPE;\n\n  stage: Konva.Stage;\n  layer: Konva.Layer;\n  image: Konva.Image;\n  isPaint: boolean = false;\n  mode: string = 'brush';\n  lastShape: any;\n  color: string = '#000000';\n  textAreaVisible: boolean = false;\n\n\n  img: HTMLImageElement;\n\n  constructor() {\n\n  }\n\n\n  get drawableType(): DrawableEnum {\n    return this._drawableType;\n  }\n\n  set drawableType(value: DrawableEnum) {\n    this._drawableType = value;\n  }\n\n  ngOnInit(): void {\n    this.img = new Image();\n\n    this.img.onload = () => {\n\n      this.image = new Konva.Image({\n        image: this.img,\n      });\n\n      this.initalizeStage();\n\n      this.layer = new Konva.Layer({\n      });\n      this.layer.add(this.image);\n      this.stage.add(this.layer);\n\n    };\n\n    this.img.src = \"https://sharepointpro.github.io/sppro-image-annote/static/media/room.fdc5a868.jpg\";\n  }\n\n\n  initalizeStage(): void {\n    this.stage = new Konva.Stage({\n      container: \"stage\",\n      width: this.img.width,\n      height: this.img.height\n    });\n\n    this.stage.on('mousedown', (e) => { this.onMouseDown(e) });\n    this.stage.on('mouseup', (e) => { this.onMouseUp(e) });\n    this.stage.on('mousemove', (e) => { this.onMouseMove(e) });\n  }\n\n  onMouseDown(e): void {\n    this.isPaint = true;\n\n    var pos = this.stage.getPointerPosition();\n\n    if (this.drawableType === DrawableEnum.FreePathDrawable) {\n      this.lastShape = shapeFactory.CreateLine(pos.x, pos.y, this.color);\n      this.layer.add(this.lastShape);\n    }\n\n    if (this.drawableType === DrawableEnum.SquareDrawable) {\n      this.lastShape = shapeFactory.CreateRectange(pos.x, pos.y, this.color);\n      this.layer.add(this.lastShape);\n    }\n\n    if (this.drawableType === DrawableEnum.CircleDrawable) {\n      this.lastShape = shapeFactory.CreateCircle(pos.x, pos.y, this.color);\n      this.layer.add(this.lastShape);\n    }\n\n    if (this.drawableType === DrawableEnum.ArrowDrawable) {\n      this.lastShape = shapeFactory.CreateArrow(pos.x, pos.y, this.color);\n      this.layer.add(this.lastShape);\n    }\n\n    if (this.drawableType === DrawableEnum.TextDrawable) {\n\n      if (!this.textAreaVisible) {\n        this.textAreaVisible = true;\n\n        textareaFactory.createTextArea(pos.x, pos.y, this.color, DEFAULT_FONT_FAMILY, (element) => {\n          if (element.target.value !== \"\") {\n            this.lastShape = shapeFactory.CreateText(pos.x, pos.y, this.color, DEFAULT_FONT_FAMILY, element.target.value);\n            this.layer.add(this.lastShape);\n            this.layer.batchDraw();\n            this.textAreaVisible = false;\n\n          }\n        })\n      }\n\n    }\n\n  }\n\n  onSaveClick(): void {\n    this.onSave.emit(this.stage.toDataURL());\n  }\n\n  onClear(): void {\n    while (this.layer.children.length > 1){\n      this.onUndo();\n    }\n    this.layer.batchDraw();\n  }\n\n  onMouseUp(e): void {\n    this.isPaint = false;\n    this.lastShape = null;\n  }\n\n  onUndo(): void {\n    if (this.layer.children.length > 1) {\n      this.layer.children.splice(-1, 1);\n      this.layer.batchDraw();\n    }\n  }\n\n  onMouseMove(e): void {\n    if (!this.isPaint || !this.lastShape || this.lastShape === DrawableEnum.TextDrawable) {\n      return;\n    }\n    const pos = this.stage.getPointerPosition();\n\n    if (this.drawableType === DrawableEnum.FreePathDrawable) {\n      let newPoints = this.lastShape.points().concat([pos.x, pos.y]);\n      this.lastShape.points(newPoints);\n    }\n\n    if (this.drawableType === DrawableEnum.SquareDrawable) {\n      const dx = -(this.lastShape.attrs.x - pos.x);\n      const dy = -(this.lastShape.attrs.y - pos.y);\n\n      this.lastShape.attrs.width = dx;\n      this.lastShape.attrs.height = dy;\n    }\n\n    if (this.drawableType === DrawableEnum.CircleDrawable) {\n      const dx = this.lastShape.attrs.x - pos.x;\n      const dy = this.lastShape.attrs.y - pos.y;\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      this.lastShape.attrs.radius = radius;\n    }\n\n    if (this.drawableType === DrawableEnum.ArrowDrawable) {\n      let newPoints = [this.lastShape.attrs.points[0], this.lastShape.attrs.points[1]];\n\n      newPoints.push(pos.x);\n      newPoints.push(pos.y);\n\n      this.lastShape.points(newPoints);\n    }\n\n    this.layer.batchDraw();\n  }\n\n\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { faSave, faBan, faUndo, faSquareFull, faPencilAlt, faSquare, faCircle, faLongArrowAltRight, faFont  } from '@fortawesome/free-solid-svg-icons'\nimport { DrawableEnum } from '../enums/drawableEnum';\n\n@Component({\n  selector: 'sppro-toolbar',\n  templateUrl: './toolbar.component.html',\n  styleUrls: ['./toolbar.component.scss']\n})\nexport class ToolbarComponent implements OnInit {\n\n  @Output() drawableTypeChange = new EventEmitter<DrawableEnum>();\n  @Input() drawableType:DrawableEnum;\n\n  @Output() colorChange = new EventEmitter<string>();\n  @Input() color:string;\n\n  @Output() onUndo = new EventEmitter();\n  @Output() onClear = new EventEmitter();\n  @Output() onSave = new EventEmitter();\n\n\n\n\n  showColorPicker: boolean = false;\n\n  //Icons\n  faPencilAlt = faPencilAlt;\n  faSquare = faSquare;\n  faCircle = faCircle;\n  faLongArrowAltRight = faLongArrowAltRight;\n  faFont = faFont;\n  faSquareFull = faSquareFull;\n  faUndo = faUndo;\n  faBan = faBan;\n  faSave = faSave;\n\n  DrawableEnum = DrawableEnum;\n  \n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onDrawableChange(value:DrawableEnum): void {\n    this.drawableTypeChange.emit(value);\n  }\n\n  getClass(value:DrawableEnum): string {\n    var classes = \"toolButton\";\n    if (value === this.drawableType){\n      classes += \" active\";\n    }\n    return classes;\n  }\n\n  showColor(): void {\n    this.showColorPicker = true;\n  }\n\n  onColorChange(event): void {\n    this.colorChange.emit(event.color.hex);\n  }\n\n  onAccept(): void{\n    //setTimeout is hack as onAccept was calling a stale state\n    setTimeout(() => {\n      this.showColorPicker = false;\n    });\n  }\n\n\n  \n  onColorPicked(event): void {\n    this.onColorChange(event);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgAnnoteComponent } from './ng-annote/ng-annote.component';\nimport { ToolbarComponent } from './toolbar/toolbar.component';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { ColorPhotoshopModule } from 'ngx-color/photoshop'\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [\n    NgAnnoteComponent,\n    ToolbarComponent],\n  imports: [\n    FontAwesomeModule,\n    ColorPhotoshopModule,\n    CommonModule\n  ],\n  exports: [NgAnnoteComponent]\n})\nexport class SpproNgAnnoteModule { }\n","/*\n * Public API Surface of sppro-ng-annote\n */\n\nexport * from './lib/ng-annote/ng-annote.component';\nexport * from './lib/sppro-ng-annote.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {ToolbarComponent as Éµa} from './lib/toolbar/toolbar.component';"],"names":["TEXT_AREA_ID"],"mappings":"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"}