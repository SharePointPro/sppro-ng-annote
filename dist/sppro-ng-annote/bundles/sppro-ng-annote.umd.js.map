{"version":3,"file":"sppro-ng-annote.umd.js","sources":["../../../projects/sppro-ng-annote/src/lib/enums/drawableEnum.ts","../../../projects/sppro-ng-annote/src/lib/factories/shapeFactory.ts","../../../projects/sppro-ng-annote/src/lib/factories/textareaFactory.ts","../../../projects/sppro-ng-annote/src/lib/ng-annote/ng-annote.component.ts","../../../projects/sppro-ng-annote/src/lib/toolbar/toolbar.component.ts","../../../projects/sppro-ng-annote/src/lib/sppro-ng-annote.module.ts","../../../projects/sppro-ng-annote/src/public-api.ts","../../../projects/sppro-ng-annote/src/sppro-ng-annote.ts"],"names":["TEXT_AREA_ID","Konva","EventEmitter","Component","Output","faPencilAlt","faSquare","faCircle","faLongArrowAltRight","faFont","faSquareFull","faUndo","faBan","faSave","Input","NgModule","FontAwesomeModule","ColorPhotoshopModule","CommonModule"],"mappings":"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","sourcesContent":["export enum DrawableEnum {\r\n    FreePathDrawable,\r\n    SquareDrawable,\r\n    CircleDrawable,\r\n    ArrowDrawable,\r\n    TextDrawable\r\n  }","import { normalizeGenFileSuffix } from '@angular/compiler/src/aot/util';\r\nimport Konva from 'konva';\r\n\r\nconst TEXT_AREA_ID = \"konva-text-editor\";\r\n\r\nexport default {\r\n    CreateLine(x: number, y: number, color: string): Konva.Line {\r\n        return new Konva.Line({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            // globalCompositeOperation:\r\n            //   this.mode === 'brush' ? 'source-over' : 'destination-out',\r\n            points: [x, y],\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateRectange(x: number, y: number, color: string): Konva.Rect {\r\n        return new Konva.Rect({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            x: x,\r\n            y: y,\r\n            width: 0,\r\n            height: 0,\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateCircle(x: number, y: number, color: string): Konva.Circle {\r\n        return new Konva.Circle({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            x: x,\r\n            y: y,\r\n            radius: 0,\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateArrow(x: number, y: number, color: string): Konva.Arrow {\r\n        return new Konva.Arrow({\r\n            stroke: color,\r\n            strokeWidth: 2,\r\n            points: [x, y],\r\n            draggable: true\r\n        });\r\n    },\r\n    CreateText(x: number, y: number, color: string, fontFamily: string, text: string): Konva.Text {\r\n        return new Konva.Text({\r\n            stroke: color,\r\n            strokeWidth: .1,\r\n            x: x,\r\n            y: y + 1,\r\n            text: text,\r\n            draggable: true,\r\n            fontFamily: fontFamily,\r\n            fontStyle: 'normal'\r\n        });\r\n    }\r\n\r\n}\r\n","const TEXT_AREA_ID = \"konva-text-editor\";\r\n\r\nexport default {\r\n    createTextArea: (x: number, y: number, color: string, fontFamily: string, onBlur: Function) => {\r\n        let textarea = getTextArea();\r\n        styleTextarea(textarea, x, y, color, fontFamily);\r\n        setupEvents(textarea, onBlur);\r\n\r\n        //Auto focus after creation\r\n        setTimeout(() => {\r\n            textarea.focus();\r\n        }, (100));\r\n    }\r\n}\r\n\r\nconst getTextArea = () => {\r\n    var textarea = document.getElementById(TEXT_AREA_ID);\r\n    if (!textarea) {\r\n        textarea = document.createElement('textarea');\r\n        let canvas = document.getElementsByClassName(\"konvajs-content\")[0];\r\n        canvas.appendChild(textarea);\r\n\r\n        textarea.style.position = 'absolute';\r\n        textarea.id = TEXT_AREA_ID;\r\n    }\r\n    return textarea;\r\n}\r\n\r\nconst styleTextarea = (textarea, x, y, color, fontFamily) => {\r\n    textarea.style.top = y + 'px';\r\n    textarea.style.left = x + 'px';\r\n    textarea.style.width = \"20px\";\r\n    textarea.style.height = \"20px\"\r\n    textarea.style.fontSize = '12px';\r\n    textarea.style.border = 'none';\r\n    textarea.style.padding = '0px';\r\n    textarea.style.margin = '0px';\r\n    textarea.style.overflow = 'hidden';\r\n    textarea.style.whiteSpace = 'nowrap';\r\n    textarea.style.background = 'none';\r\n    textarea.style.outline = 'none';\r\n    textarea.style.resize = 'none';\r\n    textarea.style.lineHeight = \"12px\"\r\n    textarea.style.transformOrigin = 'left top';\r\n    textarea.style.color = color;\r\n    textarea.style.fontFamily = fontFamily;\r\n}\r\n\r\nconst setupEvents = (textarea, onBlur) => {\r\n \r\n    textarea.addEventListener('input', (e) => {\r\n        autoExpand(e.target);\r\n    });\r\n\r\n    textarea.addEventListener('blur', (e) => {\r\n        removeTextarea();\r\n        onBlur(e);\r\n    });\r\n}\r\n\r\nconst removeTextarea = () => {\r\n    var elem = document.getElementById(TEXT_AREA_ID);\r\n    if (elem != null) {\r\n        elem.parentNode.removeChild(elem);\r\n    }\r\n}\r\n\r\nconst autoExpand = (field) => {\r\n    // Calculate the height\r\n    var height = field.scrollHeight;\r\n    var width = field.scrollWidth;\r\n    field.style.width = width + 'px';\r\n    field.style.height = height + 'px';\r\n}","import { createOfflineCompileUrlResolver } from '@angular/compiler';\r\nimport { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\nimport Konva from 'konva';\r\nimport { DrawableEnum } from  '../enums/drawableEnum';\r\nimport shapeFactory from '../factories/shapeFactory';\r\nimport textareaFactory from '../factories/textareaFactory';\r\n\r\nconst DEFAULT_DRAWABLE_TYPE: DrawableEnum = DrawableEnum.FreePathDrawable;\r\nconst DEFAULT_FONT_FAMILY: string = 'Arial';\r\n\r\n@Component({\r\n  selector: 'sppro-ng-annote',\r\n  templateUrl: './ng-annote.component.html',\r\n  styleUrls: ['./ng-annote.component.scss']\r\n})\r\nexport class NgAnnoteComponent implements OnInit {\r\n\r\n  @Output() onSave = new EventEmitter<string>();\r\n\r\n  private _drawableType: DrawableEnum = DEFAULT_DRAWABLE_TYPE;\r\n\r\n  stage: Konva.Stage;\r\n  layer: Konva.Layer;\r\n  image: Konva.Image;\r\n  isPaint: boolean = false;\r\n  mode: string = 'brush';\r\n  lastShape: any;\r\n  color: string = '#000000';\r\n  textAreaVisible: boolean = false;\r\n\r\n\r\n  img: HTMLImageElement;\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n\r\n  get drawableType(): DrawableEnum {\r\n    return this._drawableType;\r\n  }\r\n\r\n  set drawableType(value: DrawableEnum) {\r\n    this._drawableType = value;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.img = new Image();\r\n\r\n    this.img.onload = () => {\r\n\r\n      this.image = new Konva.Image({\r\n        image: this.img,\r\n      });\r\n\r\n      this.initalizeStage();\r\n\r\n      this.layer = new Konva.Layer({\r\n      });\r\n      this.layer.add(this.image);\r\n      this.stage.add(this.layer);\r\n\r\n    };\r\n\r\n    this.img.src = \"https://sharepointpro.github.io/sppro-image-annote/static/media/room.fdc5a868.jpg\";\r\n  }\r\n\r\n\r\n  initalizeStage(): void {\r\n    this.stage = new Konva.Stage({\r\n      container: \"stage\",\r\n      width: this.img.width,\r\n      height: this.img.height\r\n    });\r\n\r\n    this.stage.on('mousedown', (e) => { this.onMouseDown(e) });\r\n    this.stage.on('mouseup', (e) => { this.onMouseUp(e) });\r\n    this.stage.on('mousemove', (e) => { this.onMouseMove(e) });\r\n  }\r\n\r\n  onMouseDown(e): void {\r\n    this.isPaint = true;\r\n\r\n    var pos = this.stage.getPointerPosition();\r\n\r\n    if (this.drawableType === DrawableEnum.FreePathDrawable) {\r\n      this.lastShape = shapeFactory.CreateLine(pos.x, pos.y, this.color);\r\n      this.layer.add(this.lastShape);\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.SquareDrawable) {\r\n      this.lastShape = shapeFactory.CreateRectange(pos.x, pos.y, this.color);\r\n      this.layer.add(this.lastShape);\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.CircleDrawable) {\r\n      this.lastShape = shapeFactory.CreateCircle(pos.x, pos.y, this.color);\r\n      this.layer.add(this.lastShape);\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.ArrowDrawable) {\r\n      this.lastShape = shapeFactory.CreateArrow(pos.x, pos.y, this.color);\r\n      this.layer.add(this.lastShape);\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.TextDrawable) {\r\n\r\n      if (!this.textAreaVisible) {\r\n        this.textAreaVisible = true;\r\n\r\n        textareaFactory.createTextArea(pos.x, pos.y, this.color, DEFAULT_FONT_FAMILY, (element) => {\r\n          if (element.target.value !== \"\") {\r\n            this.lastShape = shapeFactory.CreateText(pos.x, pos.y, this.color, DEFAULT_FONT_FAMILY, element.target.value);\r\n            this.layer.add(this.lastShape);\r\n            this.layer.batchDraw();\r\n            this.textAreaVisible = false;\r\n\r\n          }\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  onSaveClick(): void {\r\n    this.onSave.emit(this.stage.toDataURL());\r\n  }\r\n\r\n  onClear(): void {\r\n    while (this.layer.children.length > 1){\r\n      this.onUndo();\r\n    }\r\n    this.layer.batchDraw();\r\n  }\r\n\r\n  onMouseUp(e): void {\r\n    this.isPaint = false;\r\n    this.lastShape = null;\r\n  }\r\n\r\n  onUndo(): void {\r\n    if (this.layer.children.length > 1) {\r\n      this.layer.children.splice(-1, 1);\r\n      this.layer.batchDraw();\r\n    }\r\n  }\r\n\r\n  onMouseMove(e): void {\r\n    if (!this.isPaint || !this.lastShape || this.lastShape === DrawableEnum.TextDrawable) {\r\n      return;\r\n    }\r\n    const pos = this.stage.getPointerPosition();\r\n\r\n    if (this.drawableType === DrawableEnum.FreePathDrawable) {\r\n      let newPoints = this.lastShape.points().concat([pos.x, pos.y]);\r\n      this.lastShape.points(newPoints);\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.SquareDrawable) {\r\n      const dx = -(this.lastShape.attrs.x - pos.x);\r\n      const dy = -(this.lastShape.attrs.y - pos.y);\r\n\r\n      this.lastShape.attrs.width = dx;\r\n      this.lastShape.attrs.height = dy;\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.CircleDrawable) {\r\n      const dx = this.lastShape.attrs.x - pos.x;\r\n      const dy = this.lastShape.attrs.y - pos.y;\r\n      const radius = Math.sqrt(dx * dx + dy * dy);\r\n      this.lastShape.attrs.radius = radius;\r\n    }\r\n\r\n    if (this.drawableType === DrawableEnum.ArrowDrawable) {\r\n      let newPoints = [this.lastShape.attrs.points[0], this.lastShape.attrs.points[1]];\r\n\r\n      newPoints.push(pos.x);\r\n      newPoints.push(pos.y);\r\n\r\n      this.lastShape.points(newPoints);\r\n    }\r\n\r\n    this.layer.batchDraw();\r\n  }\r\n\r\n\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { faSave, faBan, faUndo, faSquareFull, faPencilAlt, faSquare, faCircle, faLongArrowAltRight, faFont  } from '@fortawesome/free-solid-svg-icons'\nimport { DrawableEnum } from '../enums/drawableEnum';\n\n@Component({\n  selector: 'sppro-toolbar',\n  templateUrl: './toolbar.component.html',\n  styleUrls: ['./toolbar.component.scss']\n})\nexport class ToolbarComponent implements OnInit {\n\n  @Output() drawableTypeChange = new EventEmitter<DrawableEnum>();\n  @Input() drawableType:DrawableEnum;\n\n  @Output() colorChange = new EventEmitter<string>();\n  @Input() color:string;\n\n  @Output() onUndo = new EventEmitter();\n  @Output() onClear = new EventEmitter();\n  @Output() onSave = new EventEmitter();\n\n\n  showColorPicker: boolean = false;\n\n  //Icons\n  faPencilAlt = faPencilAlt;\n  faSquare = faSquare;\n  faCircle = faCircle;\n  faLongArrowAltRight = faLongArrowAltRight;\n  faFont = faFont;\n  faSquareFull = faSquareFull;\n  faUndo = faUndo;\n  faBan = faBan;\n  faSave = faSave;\n\n  DrawableEnum = DrawableEnum;\n  \n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onDrawableChange(value:DrawableEnum): void {\n    this.drawableTypeChange.emit(value);\n  }\n\n  getClass(value:DrawableEnum): string {\n    var classes = \"toolButton\";\n    if (value === this.drawableType){\n      classes += \" active\";\n    }\n    return classes;\n  }\n\n  showColor(): void {\n    this.showColorPicker = true;\n  }\n\n  onColorChange(event): void {\n    this.colorChange.emit(event.color.hex);\n  }\n\n  onAccept(): void{\n    //setTimeout is hack as onAccept was calling a stale state\n    setTimeout(() => {\n      this.showColorPicker = false;\n    });\n  }\n\n\n  \n  onColorPicked(event): void {\n    this.onColorChange(event);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgAnnoteComponent } from './ng-annote/ng-annote.component';\nimport { ToolbarComponent } from './toolbar/toolbar.component';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { ColorPhotoshopModule } from 'ngx-color/photoshop'\nimport { CommonModule } from '@angular/common';\n\n\n@NgModule({\n  declarations: [\n    NgAnnoteComponent,\n    ToolbarComponent],\n  imports: [\n    FontAwesomeModule,\n    ColorPhotoshopModule,\n    CommonModule\n  ],\n  exports: [NgAnnoteComponent]\n})\nexport class SpproNgAnnoteModule { }\n","/*\n * Public API Surface of sppro-ng-annote\n */\n\nexport * from './lib/ng-annote/ng-annote.component';\nexport * from './lib/sppro-ng-annote.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {ToolbarComponent as ɵa} from './lib/toolbar/toolbar.component';"]}